name: Transfer to BMG and read absorbance

metadata:
  author: Casey Stone
  info: Workflow for moving to bmg and reading
  version: 0.1

flowdef:
  # # open bmg
  # - name: open bmg
  #   module: bio_bmg
  #   action: open

  # # open incubator
  # - name: open incubator
  #   module: inheco_devID2_floor0
  #   action: open

  # # transfer from incubator to exchange
  # - name: transfer to exchange
  #   module: biopf400
  #   action: transfer
  #   args:
  #     source: payload.incubator_location
  #     target: exchange_deck_low_narrow
  #     source_approach: safe_path_inheco_dev2
  #     target_approach: safe_path_exchange
  #     source_plate_rotation: narrow
  #     target_plate_rotation: narrow
  #   comment: transfer microplate with lid to exchange

  # # close incubator
  # - name: close incubator
  #   module: inheco_devID2_floor0
  #   action: close

  # remove the lid to lid nest 2 (wide)
  - name: remove lid from plate on exchange
    module: biopf400
    action: remove_lid
    args:
      source: exchange_deck_low_wide
      target: payload.lid_location
      source_approach: safe_path_exchange
      target_approach: payload.lid_safe_path
      source_plate_rotation: wide
      target_plate_rotation: wide
      lid_height: 8

  # - name: remove lid from plate on bmg
  #   module: biopf400
  #   action: remove_lid
  #   args:
  #     source: bmg_reader_nest
  #     target: lidnest_3_narrow
  #     source_approach: safe_path_bmg
  #     target_approach: safe_path_lidnest_3
  #     source_plate_rotation: narrow
  #     target_plate_rotation: narrow
  #     lid_height: 8

  # - name: close bmg
  #   module: bio_bmg
  #   action: close

  # - name: close incubator
  #   module: tekmatic
  #   action: close

  # - name: Run BMG absorbance assay
  #   module: bio_bmg
  #   action: run_assay
  #   args:
  #     assay_name: NIDHI
  #     data_output_file_name: payload.bmg_data_output_name

  # - name: open bmg
  #   module: bio_bmg
  #   action: open
