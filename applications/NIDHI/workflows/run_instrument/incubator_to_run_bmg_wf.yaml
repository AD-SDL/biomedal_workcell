name: Run the BMG plate reader assay - Substrate App Workflow

metadata:
  author: Casey Stone
  info: Workflow for running an assay on the BMG plate reader
  version: 0.1

flowdef:
  # - name: open bmg
  #   module: bio_bmg
  #   action: open

  # - name: transfer
  #   module: biopf400
  #   action: transfer
  #   args:
  #     source: tekmatic_incubator.nest
  #     target: bmg_reader.nest
  #     source_approach: safe_path_tekmatic
  #     source_plate_rotation: narrow
  #     target_plate_rotation: narrow
  #   comment: Transfer plate with lid from tekmatic incubator to bmg reader

  - name: close bmg
    module: bio_bmg
    action: close

  - name: close incubator
    module: tekmatic
    action: close

  - name: Run BMG Inoculation and reading assay
    module: bio_bmg
    action: run_assay
    args: 
      assay_name: NIDHI
      data_output_file_name: payload.bmg_data_output_name   

  - name: open bmg
    module: bio_bmg
    action: open